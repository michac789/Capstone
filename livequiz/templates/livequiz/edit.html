{% extends 'layout/root.html' %}
{% load static %}

{% block title %}
    Edit Game
{% endblock title %}

{% block script %}
    <script src="{% static "edit.js" %}" type="module"></script>
{% endblock script %}

{% block body %}
    <h1>EDIT PAGE TODO</h1>

    <a href="{% url 'livequiz:index' %}">back to home</a>
    

    {% for question in questions.all %}
        <div class="questiondiv" data-quesid={{ question.id }}>
            <h3>Q{{ forloop.counter }}.</h3>
            <section class="questioneditable">
                <span class="ques_text">Question:</span>
                <span class="ques">{{ question.question }}</span><br>
                <span class="opt1_text">Option 1:</span>
                <span class="opt1">{{ question.choice1 }}</span><br>
                <span class="opt2_text">Option 2:</span>
                <span class="opt2">{{ question.choice2 }}</span><br>
                <span class="opt3_text">Option 3:</span>
                <span class="opt3">{{ question.choice3 }}</span><br>
                <span class="opt4_text">Option 4:</span>
                <span class="opt4">{{ question.choice4 }}</span><br>
                <span class="ans_text">Ans: </span>
                <span class="ans">{{ question.answer }}</span><br>
                {% if request.user == game.creator %}
                    <button class="editbutton" data-quesid={{ question.id }}>
                        Edit
                    </button>
                {% endif %}
            </section>
            {% if request.user == game.creator %}
                <button class="deletebutton" value={{ question.id }}>Delete</button>
            {% endif %}
        </div>
    {% empty %}
        No questions created yet!
    {% endfor %}<br>
    
    {% if request.user == game.creator %}
        <form action="{% url 'livequiz:edit' game_id=game.id %}" method="POST">
            {% csrf_token %}
            {{ form.ques_count.label_tag }}
            {{ form.ques_count }}
            <button type="submit">Add</button>
        </form>
    {% endif %}
    
{% endblock body %}